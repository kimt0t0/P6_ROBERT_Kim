{"version":3,"sources":["app.js"],"names":["express","require","mongoose","saucesRoutes","path","Sauce","app","User","join","_dirname","use","userRoutes","config","user","process","env","DB_USER","connect","pass","useNewUrlParser","useUnifiedTopology","then","console","log","res","setHeader","next","message","exports"],"mappings":"aAGA,IAAMA,QAAUC,QAAQ,WADxBC,SAAAD,QAAA,YACMD,KAAOC,QAAU,QACjBC,WAAWD,QAAQ,iBAInBE,aAAeF,QAAQ,kBAHvBG,KAAOH,QAAQ,iBAKfI,MAAQJ,QAAQ,kBAEhBK,IAAMN,UAHZM,IAAMC,IAAI,UAAWP,QAAA,OAADI,KAApBI,KAAAC,SAAA,YAOAH,IAAII,IAAI,YAAaC,YANrBL,IAAMD,IAAAA,aAAgBF,cAItBF,QAAA,UAAAW,SAOA,IAAMC,KAAOC,QAAQC,IAAIC,QANrBN,KAAII,QAAWd,IAAAA,QAEnBM,SAAQW,QAARX,iBAAAA,OAAAO,KAAAP,KAAAA,OAAAY,KAAAZ,8DAEA,CAAAa,iBAAA,EAOIC,oBAAoB,IAErBC,KAAK,WAAA,OAAMC,QAAQC,IAAI,mCAX1BjB,MAIU,WAAA,OAAGQ,QAAYE,IAAAA,mCAOjBV,IAAAI,IAAA,SAAMY,EAAAA,EAAQC,GAJtBC,EAAAC,UAKS,8BAAA,KAAAD,EAAAC,UAAcF,+BAAI,0EAL3BC,EAAAC,UAAA,+BAAA,0CAQAC,MAIIF,IAAAA,IAAIC,SAAAA,EAAAA,EAAUC,GACdF,EAAIC,KAAAA,CAAJE,QAAc,qCAEdD,MAIJpB,OAAAsB,QAAQtB","file":"app.min.js","sourcesContent":["/* *** APPLICATION BACK *** */\r\n\r\n/* VARIABLES */\r\nconst express = require('express');\r\nconst mongoose = require('mongoose');\r\nconst path = require('path');\r\n\r\nconst userRoutes = require('./routes/user');\r\nconst saucesRoutes = require('./routes/sauce');\r\nconst User = require('./models/User');\r\nconst Sauce = require('./models/Sauce');\r\n\r\nconst app = express();\r\n\r\n/* ENREGISTREMENT DES ROUTEURS */\r\napp.use('/images', express.static(path.join(_dirname, 'images')));\r\napp.use('/api/user', userRoutes);\r\napp.use('/api/sauce', saucesRoutes);\r\n\r\n/* CONNEXION MONGODB */\r\nrequire('dotenv').config();\r\nconst user = process.env.DB_USER;\r\nconst pass = process.env.DB_PASS;\r\n\r\nmongoose.connect(`mongodb+srv://${user}:${pass}@cluster0.omuvgnu.mongodb.net/?retryWrites=true&w=majority`,\r\n  { useNewUrlParser: true,\r\n    useUnifiedTopology: true \r\n    })\r\n  .then(() => console.log('Connexion à MongoDB réussie !'))\r\n  .catch(() => console.log('Connexion à MongoDB échouée !'));\r\n\r\n\r\n/* MIDDLEWARES */\r\n\r\n// Prévention erreurs CORS:\r\napp.use((req, res, next) => {\r\n    res.setHeader('Access-Control-Allow-Origin', '*');\r\n    res.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content, Accept, Content-Type, Authorization');\r\n    res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, PATCH, OPTIONS');\r\n    next();\r\n});\r\n\r\n//Confirmation requête de l'app au serveur:\r\napp.use((req, res, next) => {\r\n    res.json({ message: 'Votre requête a bien été reçue !' });\r\n    // instructions\r\n    next();\r\n});\r\n\r\nmodule.exports = app;"]}