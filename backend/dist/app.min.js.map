{"version":3,"sources":["app.js"],"names":["express","require","mongoose","cors","userRoutes","helmet","config","saucesRoutes","pass","process","env","DB_PASS","connect","user","useNewUrlParser","DB_USER","then","console","log","useUnifiedTopology","res","setHeader","next","crossOriginResourcePolicy","policy","json","__dirname","app","use","exports"],"mappings":"aAGA,IAAMA,QAAUC,QAAQ,WADxBC,SAAAD,QAAA,YACMD,WAAUC,QAAQ,eAClBC,OAAWD,QAAQ,UAInBE,KAAOF,QAAQ,QAEfG,WAAaH,QAAQ,iBAHrBI,aAAiBJ,QAAD,mBAChBE,IAAOF,UAQbA,QAAQ,UAAUK,SALlB,IAAMC,KAAAA,QAAeN,IAAAA,QAOfO,KAAOC,QAAQC,IAAIC,QAFzBV,SAAQW,QAARX,iBAAAA,OAAAY,KAAAZ,KAAAA,OAAAO,KAAAP,8DAME,CAAEa,iBAAiB,EALfD,oBAAmBE,IAGzBC,KAAA,WAAA,OAAAC,QAAAC,IAAA,mCAJAjB,MAUS,WAAA,OAAMgB,QAAQC,IAAI,mCAHvBC,IAAAA,IAAAA,SAAAA,EAAAA,EAAAA,GAFJC,EAIGJ,UAAK,8BAAA,KAAAI,EAAAC,UAAa,+BAAK,0EAJ1BD,EAAAC,UAKS,+BAAA,0CAAAC,MAIPF,IAAAA,IAAIC,OAAJ,CAAcE,0BAAA,CAAdC,OAAA,mBACAJ,IAAAA,IAAIC,WAAUI,QAEdH,IAAAA,IAAI,UAAAtB,QAAA,OAAA0B,UAAA,WACLC,IALDC,IAAA,YAAAxB,YAQAuB,IAAAC,IAAA,cAAArB,cACAoB,OAAAE,QAAeF","file":"app.min.js","sourcesContent":["/* *** APPLICATION BACK *** */\r\n\r\n/* VARIABLES */\r\nconst express = require('express');\r\nconst mongoose = require('mongoose');\r\nconst bodyParser = require('body-parser');\r\n\r\nconst helmet = require('helmet');\r\nconst cors = require('cors');\r\n\r\nconst userRoutes = require('./routes/user');\r\nconst saucesRoutes = require('./routes/sauces');\r\n\r\nconst app = express();\r\n\r\n// ATTENTION ne fonctionne pas actuellement:\r\nrequire('dotenv').config();\r\nconst user = process.env.DB_USER;\r\nconst pass = process.env.DB_PASS; \r\n\r\n/* CONNEXION MONGODB */\r\nmongoose.connect(`mongodb+srv://${user}:${pass}@cluster0.omuvgnu.mongodb.net/?retryWrites=true&w=majority`,\r\n  { useNewUrlParser: true,\r\n    useUnifiedTopology: true \r\n    })\r\n  .then(() => console.log('Connexion à MongoDB réussie !'))\r\n  .catch(() => console.log('Connexion à MongoDB échouée !'));\r\n\r\n/* PRÉVENTION ERREURS CORS */\r\napp.use((req, res, next) => {\r\n  res.setHeader('Access-Control-Allow-Origin', '*');\r\n  res.setHeader('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content, Accept, Content-Type, Authorization');\r\n  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, PATCH, OPTIONS');\r\n  next();\r\n});\r\n\r\n\r\n/* ACTIONS */\r\napp.use(helmet({ crossOriginResourcePolicy: { policy: \"cross-origin\" } }));\r\napp.use(bodyParser.json());\r\n\r\napp.use('/images', express.static(__dirname +  'images')); //chemin statique pour les images\r\napp.use('/api/auth', userRoutes);\r\napp.use('/api/sauces', saucesRoutes);\r\n\r\nmodule.exports = app;"]}