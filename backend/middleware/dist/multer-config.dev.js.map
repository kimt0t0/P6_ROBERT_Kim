{"version":3,"sources":["multer-config.js"],"names":["multer","require","MIME_TYPES","storage","diskStorage","destination","req","file","callback","filename","name","originalname","split","join","extension","mimetype","Date","now","module","exports","single"],"mappings":";;AAAA;AACA;AAEA,IAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AAEA,IAAMC,UAAU,GAAG;AACf,eAAa,KADE;AAEf,gBAAc,KAFC;AAGf,eAAa;AAHE,CAAnB;AAMA,IAAMC,OAAO,GAAGH,MAAM,CAACI,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,EAAE,qBAACC,GAAD,EAAMC,IAAN,EAAYC,QAAZ,EAAyB;AAAE;AACpCA,IAAAA,QAAQ,CAAC,IAAD,EAAO,QAAP,CAAR;AACH,GAH8B;AAI/BC,EAAAA,QAAQ,EAAE,kBAACH,GAAD,EAAMC,IAAN,EAAYC,QAAZ,EAAyB;AAAE;AACjC,QAAME,IAAI,GAAGH,IAAI,CAACI,YAAL,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6BC,IAA7B,CAAkC,GAAlC,CAAb;AACA,QAAMC,SAAS,GAAGZ,UAAU,CAACK,IAAI,CAACQ,QAAN,CAA5B,CAF+B,CAEc;;AAC7CP,IAAAA,QAAQ,CAAC,IAAD,EAAOE,IAAI,GAAGM,IAAI,CAACC,GAAL,EAAP,GAAoB,GAApB,GAA0BH,SAAjC,CAAR,CAH+B,CAGsB;AACxD;AAR8B,CAAnB,CAAhB;AAWAI,MAAM,CAACC,OAAP,GAAiBnB,MAAM,CAAC;AAACG,EAAAA,OAAO,EAAEA;AAAV,CAAD,CAAN,CAA2BiB,MAA3B,CAAkC,OAAlC,CAAjB,C,CAA6D","sourcesContent":["/* *** CONFIGURATION MULTER *** */\r\n// package installé qui permettra d'enregistrer sur le serveur des images envoyées par les utilisateurs\r\n\r\nconst multer = require('multer');\r\n\r\nconst MIME_TYPES = {\r\n    'image/jpg': 'jpg',\r\n    'image/jpeg': 'jpg',\r\n    'image/png': 'png'\r\n};\r\n\r\nconst storage = multer.diskStorage({\r\n    destination: (req, file, callback) => { // indique à multer où enregistrer les fichiers\r\n        callback(null, 'images');\r\n    },\r\n    filename: (req, file, callback) => { // indique à multer d'utiliser le nom d'origine en remplaçant les ' ' par _\r\n        const name = file.originalname.split(' ').join('_');\r\n        const extension = MIME_TYPES[file.mimetype]; // utilise le dictionnaire de type MIME pour résoudre l'extension appropriée\r\n        callback(null, name + Date.now() + '.' + extension); // et d'ajouter un timestamp\r\n    }\r\n});\r\n\r\nmodule.exports = multer({storage: storage}).single('image'); // exporte l'élément multer configuré en lui passant la constante storage, en indiquant qu'on gère les dl de fichiers image"],"file":"multer-config.dev.js"}