{"version":3,"sources":["multer-config.js"],"names":["multer","require","MIME_TYPES","image/jpeg","image/png","storage","diskStorage","destination","req","file","callback","filename","name","originalname","split","join","replace","extension","mimetype","module","exports","single"],"mappings":"aACA,IAAAA,OAAAC,QAAA,UAIMC,WAAa,CAAbA,YAAa,MACfC,aAAa,MACbC,YAAc,OAIZC,QAAUL,OAAOM,YAAY,CAC/BC,YAAa,SAAAC,EAAAC,EAAAC,GAA2BA,EAAA,KAAA,WADTC,SAAA,SAAAH,EAAAC,EAAAC,GAI/BC,IAAUC,EAAAH,EAAAI,aAAAC,MAAYJ,KAAZK,KAAyB,KAAAC,QAAA,OAAA,IAAEC,EAAAf,WAAAO,EAAAS,UAC3BN,EAAOH,KAAKI,EAAAA,KAAaC,MAAlB,IAAkCG,MAGlDE,OAAAC,QAAApB,OAAA,CAAAK,QAAAA,UAAAgB,OAAA","file":"multer-config.min.js","sourcesContent":["/* *** CONFIGURATION MULTER *** */\r\n// package installé qui permettra d'enregistrer sur le serveur des images envoyées par les utilisateurs\r\n\r\nconst multer = require('multer');\r\n\r\nconst MIME_TYPES = {\r\n    'image/jpg': 'jpg',\r\n    'image/jpeg': 'jpg',\r\n    'image/png': 'png'\r\n};\r\n\r\nconst storage = multer.diskStorage({\r\n    destination: (req, file, callback) => { // indique à multer où enregistrer les fichiers\r\n        callback(null, 'images');\r\n    },\r\n    filename: (req, file, callback) => { // indique à multer d'utiliser le nom d'origine en remplaçant les ' ' par _\r\n        const name = file.originalname.split(' ').join('_').replace('.jpg', '');\r\n        const extension = MIME_TYPES[file.mimetype]; // utilise le dictionnaire de type MIME pour résoudre l'extension appropriée\r\n        callback(null, name + Date.now() + '.' + extension); // et d'ajouter un timestamp\r\n    }\r\n});\r\n\r\nmodule.exports = multer({storage: storage}).single('image'); // exporte l'élément multer configuré en lui passant la constante storage, en indiquant qu'on gère les dl de fichiers image"]}